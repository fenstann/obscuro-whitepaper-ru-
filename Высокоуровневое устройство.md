# Высокоуровневое устройство
Obscuro является L2 протоколом, в котором действия пользователя перемещаются за _пределы цепи_ L1, и они следуют по более распространенной роллап-схеме, в которой хранение данных транзакций на цепочке L1 приводит к достижению доступности данных и устойчивости к цензуре. Это [приводит к появлению предложений](https://notes.ethereum.org/@vbuterin/data_sharding_roadmap) по снижению затрат на хранение запрошенных данных в Ethereum. Большинство реализаций [роллапов](https://vitalik.ca/general/2021/01/05/rollup.html) существует для обеспечения масштабируемости сетей L1, но главная цель Obscuro - обеспечить конфиденциальность. Роллапы содержат все зашифрованные данные транзакций.

Сети L2 имеют однонаправленную зависимость от сети L1: в то время как сеть L2 полагается на сеть L1 для обеспечения неизменяемой и публичной записи данных транзакций, а также для обеспечения устойчивости к цензуре, оперативности и доступности, сеть L1 не знает ни об одной отдельной сети L2. Представленные роллапы на L2 являются обычными транзакциями на L1.

Следующая диаграмма показывает взаимодействие между двумя децентрализованными сетями, Ethereum (L1) и Obscuro (L2): Obscuro состоит из нод, называемых агрегаторами, которые соревнуются в обработке пользовательских транзакций, комплектации их и отправке для включения в блоки Ethereum. Ethereum, используя свой протокол, использует собственные ноды для создания блоков на Ethereum, содержащих, помимо прочего, представленные Obscuro роллапы.

![L1-L2 Interaction](./images/l1-l2-interaction.png)

Справа внизу, на этой диаграмме, изображено состояние простой цепочки роллапов, как она находится в последовательных блоках L1.

## Сеть L1
В сети L1 существует несколько обычных контрактов Ethereum, называемых контрактами управления.

Примечание: конструкция сети L1 более подробно рассматривается в разделе [Контракты L1](./l1-contracts).

### Управление Сетью
Данный контракт является посредником для протокола. Любая нода в Obscuro, желающая присоединиться к сети, должна будет начать взаимодействие с этим контрактом и доказать, что она в работе. 
Этот контракт также будет управлять аттестационными требованиями TEE и сможет проверять отчеты об их проверке.

Он также будет управлять долей участников, способных предоставлять роллапы, известные как Агрегаторы.

_Примечание: Стэйк - это часть головоломки теории игр, которая гарантирует, что у участников сети Obscuro имеются корректные стимулы следовать за протоколом._

### Управление Роллапами
Этот модуль принимает роллапы, представленные нодами на L2, и включает их в структуру роллап-цепочки. Он работает вместе с мостом при обработке запросов на вывод средств от пользователей.

### Obscuro Мост
Этот контракт очень важен для безопасности решения, поскольку он защищает всю ликвидность, депонированную конечными пользователями Ethereum и отраженную в конфиденциальном распределённом реестре Obscuro.

## Сеть L2
Цель L2 устройства заключается в создании справедливой, не требующей разрешений, децентрализованной сети нод с валидными TEE, которые не могут наблюдать за транзакциями, которые они обрабатывают, при этом сотрудничая, для управления распределённым реестром, который хранится в виде роллапов на L1. Распределённый реестр должен сохранять свою целостность даже перед лицом катастрофических взломов TEE.

Все ноды на Obscuro должны пройти процесс проверки в рамках контракта на Управление Сетью, прежде чем получить secret информацию и принять участие.

Примечание: общий secret рассматривается в [разделе криптографии](./cryptography).

{% include_relative aggregators-verifiers.md %}
{% include_relative rollup-data-structure.md %}
